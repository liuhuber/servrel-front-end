<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<meta charset="utf-8">
<html>

<head>
    <meta charset="utf-8">
    <title>workspace</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="scriptStyle.css">
    <link rel="stylesheet" type="text/css" href="wstyle.css">
    <link rel="stylesheet" type="text/css" href="personalCSS.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://code.jquery.com/jquery-latest.pack.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="layer-v2.3/layer/layer.js"></script>
    <script type="text/javascript" src="WdrawBall.js"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
        var root = {
            "id": "",
            "name": "root"
        };
        var svg;

        function getDraw() {
            var width = "95%";
            var height = "95%";
            svg = d3.select("#visualization2").append("svg")
                .attr("width", 800)
                .attr("height", 800)
                .append("g")
                .attr("transform", function(d) {
                    return "translate(" + 400 + "," + 400 + ")";
                });
        }

        function workList() {
            var site = "http://140.121.197.135:7778/servrel/workspace?userID=" + localStorage.userID;
            $.getJSON(site, function(result) {
                console.log(result);
                var list = "";
                $.each(result, function() {
                    if (this != 200) {
                        var ptname = this;
                        ptname = ptname.substr(1, ptname.length - 2);
                        console.log(ptname);
                        var name = ptname.split(/,/);
                        for (key in name) {
                            name[key] = name[key].substr(1, name[key].length - 2);
                            console.log(name[key]);
                            if (name[key] != "") {
                                list += "<li class='list-group-item' id='" + name[key] + "'>" + name[key] + "</li>";
                            }
                        }
                    }
                });
                $("#classList").html(list);
                opendata();
            });
        }

        function opendata() {
            $(".list-group-item").click(function() {
                console.log(this.id);
                var site = "http://140.121.197.135:7778/servrel/workspace/project?userID=" + localStorage.userID + "&project=" + this.id;
                $.getJSON(site, function(data) {
                    console.log(data);
                    //console.log(data.data);
                    root = data.data;
                    //newproject();  
                    console.log("有執行ㄇ");
                    root = root.substr(1, root.length - 2);
                    root = root.toString(root);
                    //root=JSON.parse(root);
                    //root=JSON.stringify(root);
                    //root= {id:"", name:"root", children:[{id:"100", dataid:"144", name:"outdoorDataApi_outdoorsPlace100", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa37a0e4b0b60946a2e726_medium", visible:0, _children:null, parent:{}, depth:1, x:66.9767441860465, y:73.33333333333333, x0:66.9767441860465, y0:73.33333333333333, children:[{id:"101", name:"", mark:"comp", image:"comp.png", visible:0, parent:{}, depth:2, x:50.23255813953487, y:146.66666666666666, x0:50.23255813953487, y0:146.66666666666666, _children:null, children:[{favorpeople:"8", name:"Youtube_captionVideo.json", rank:1, id:20589, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa37a0e4b0b60946a2e726_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa37a0e4b0b60946a2e726_medium", dataid:"197", visible:0, parent:{}, depth:3, x:27.90697674418604, y:220, x0:27.90697674418604, y0:220}, {favorpeople:"8", name:"Youtube_Search.json", rank:2, id:88815, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa3492e4b07e1f4ebe9f2b_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa3492e4b07e1f4ebe9f2b_medium", dataid:"199", visible:0, parent:{}, depth:3, x:39.06976744186045, y:220, x0:39.06976744186045, y0:220}, {favorpeople:"8", name:"dailymotion_video.json", rank:3, id:44755, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa5890e4b0a798dbd1aebb_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa5890e4b0a798dbd1aebb_medium", dataid:"18", visible:0, parent:{}, depth:3, x:50.23255813953487, y:220, x0:50.23255813953487, y0:220}, {favorpeople:"8", name:"Vimeo_Search.json", rank:4, id:10745, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa30c8e4b008bb2ef84a05_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa30c8e4b008bb2ef84a05_medium", dataid:"176", visible:0, parent:{}, depth:3, x:61.3953488372093, y:220, x0:61.3953488372093, y0:220}, {favorpeople:"8", name:"Youtube_searchChannel.json", rank:5, id:84310, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa37efe4b0f2c97546f538_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa37efe4b0f2c97546f538_medium", dataid:"200", visible:0, parent:{}, depth:3, x:72.55813953488371, y:220, x0:72.55813953488371, y0:220}]}, {id:"102", name:"", mark:"pre", image:"pre.png", visible:0, parent:{}, depth:2, x:66.9767441860465, y:146.66666666666666, x0:66.9767441860465, y0:146.66666666666666}, {id:"103", name:"", mark:"post", image:"post.png", visible:0, parent:{}, depth:2, x:83.72093023255813, y:146.66666666666666, x0:83.72093023255813, y0:146.66666666666666}]}, {id:"200", dataid:"190", name:"worldweatheronline_searchWeatherLocationByGeocoding200", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa3492e4b07e1f4ebe9f2b_medium", visible:0, _children:null, parent:{}, depth:1, x:184.1860465116279, y:73.33333333333333, x0:184.1860465116279, y0:73.33333333333333, children:[{id:"201", name:"", mark:"comp", image:"comp.png", visible:0, parent:{}, depth:2, x:167.4418604651163, y:146.66666666666666, _children:null, x0:167.4418604651163, y0:146.66666666666666, children:[{favorpeople:"8", name:"worldweatheronline_searchWeatherLocationByIP.json", rank:1, id:33845, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa37a0e4b0b60946a2e726_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa37a0e4b0b60946a2e726_medium", dataid:"191", visible:0, parent:{}, depth:3, x:145.11627906976744, y:220, x0:145.11627906976744, y0:220}, {favorpeople:"8", name:"Geonames_wikipediaSearch.json", rank:2, id:57883, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa3492e4b07e1f4ebe9f2b_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa3492e4b07e1f4ebe9f2b_medium", dataid:"75", visible:0, parent:{}, depth:3, x:156.27906976744185, y:220, x0:156.27906976744185, y0:220}, {favorpeople:"8", name:"FouesquareaVenuesExplore_near_topPicks.json", rank:3, id:23321, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa5890e4b0a798dbd1aebb_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa5890e4b0a798dbd1aebb_medium", dataid:"68", visible:0, parent:{}, depth:3, x:167.4418604651163, y:220, x0:167.4418604651163, y0:220}, {favorpeople:"8", name:"nytimes_Geographic.json", rank:4, id:64368, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa30c8e4b008bb2ef84a05_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa30c8e4b008bb2ef84a05_medium", dataid:"126", visible:0, parent:{}, depth:3, x:178.6046511627907, y:220, x0:178.6046511627907, y0:220}, {favorpeople:"8", name:"worldweatheronline_searchWeatherLocationByGeocoding.json", rank:5, id:34461, pic:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa37efe4b0f2c97546f538_medium", workspacepeople:"6", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa37efe4b0f2c97546f538_medium", dataid:"190", visible:0, parent:{}, depth:3, x:189.7674418604651, y:220, x0:189.7674418604651, y0:220}]}, {id:"202", name:"", mark:"pre", image:"pre.png", visible:0, parent:{}, depth:2, x:184.18604651162792, y:146.66666666666666, x0:184.18604651162792, y0:146.66666666666666}, {id:"203", name:"", mark:"post", image:"post.png", visible:0, parent:{}, depth:2, x:200.93023255813955, y:146.66666666666666, x0:200.93023255813955, y0:146.66666666666666}]}, {id:"300", dataid:"46", name:"FacebookGraphSearchPlace300", image:"https://s3.amazonaws.com/mashape-production-logos/apis/53aa5890e4b0a798dbd1aebb_medium", visible:0, _children:null, parent:{}, depth:1, x:301.3953488372093, y:73.33333333333333, x0:301.3953488372093, y0:73.33333333333333, children:[{id:"301", name:"", mark:"comp", image:"comp.png", visible:0, parent:{}, depth:2, x:284.6511627906977, y:146.66666666666666, x0:284.6511627906977, y0:146.66666666666666}, {id:"302", name:"", mark:"pre", image:"pre.png", visible:0, parent:{}, depth:2, x:301.3953488372093, y:146.66666666666666, x0:301.3953488372093, y0:146.66666666666666}, {id:"303", name:"", mark:"post", image:"post.png", visible:0, parent:{}, depth:2, x:318.13953488372096, y:146.66666666666666, x0:318.13953488372096, y0:146.66666666666666}]}], depth:0, x:184.1860465116279, y:0, x0:184.1860465116279, y0:0};
                    root = {
                        id: "",
                        name: "root",
                        children: [{
                            id: "100",
                            dataid: "119",
                            name: "dailymotion_video100",
                            image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                            visible: 0,
                            _children: null,
                            parent: {},
                            depth: 1,
                            x: 180,
                            y: 73.33333333333333,
                            x0: 180,
                            y0: 73.33333333333333,
                            children: [{
                                id: "101",
                                name: "",
                                mark: "comp",
                                image: "comp.png",
                                visible: 0,
                                parent: {},
                                depth: 2,
                                x: 90,
                                y: 146.66666666666666,
                                _children: null,
                                x0: 90,
                                y0: 146.66666666666666,
                                children: [{
                                    favorpeople: "8",
                                    name: "dailymotion_video.json",
                                    rank: 1,
                                    id: 82121,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "119",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 50.00000000000001,
                                    y: 220,
                                    x0: 50.00000000000001,
                                    y0: 220
                                }, {
                                    favorpeople: "8",
                                    name: "dailymotion_game.json",
                                    rank: 2,
                                    id: 41653,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "120",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 70,
                                    y: 220,
                                    x0: 70,
                                    y0: 220
                                }, {
                                    favorpeople: "8",
                                    name: "Youtube_captionVideo.json",
                                    rank: 3,
                                    id: 38973,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "139",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 90,
                                    y: 220,
                                    x0: 90,
                                    y0: 220
                                }, {
                                    favorpeople: "8",
                                    name: "Youtube_Search.json",
                                    rank: 4,
                                    id: 17539,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "45",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 110.00000000000001,
                                    y: 220,
                                    x0: 110.00000000000001,
                                    y0: 220
                                }, {
                                    favorpeople: "8",
                                    name: "thesaurusAltervista_synonyms.json",
                                    rank: 5,
                                    id: 47571,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "199",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 130.00000000000003,
                                    y: 220,
                                    x0: 130.00000000000003,
                                    y0: 220
                                }]
                            }, {
                                id: "102",
                                name: "",
                                mark: "pre",
                                image: "pre.png",
                                visible: 0,
                                parent: {},
                                depth: 2,
                                x: 180,
                                y: 146.66666666666666,
                                x0: 180,
                                y0: 146.66666666666666
                            }, {
                                id: "103",
                                name: "",
                                mark: "post",
                                image: "post.png",
                                visible: 0,
                                parent: {},
                                depth: 2,
                                x: 270,
                                y: 146.66666666666666,
                                x0: 270,
                                y0: 146.66666666666666,
                                _children: null,
                                children: [{
                                    favorpeople: "8",
                                    name: "dailymotion_video.json",
                                    rank: 1,
                                    id: 29788,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "119",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 230,
                                    y: 220,
                                    x0: 230,
                                    y0: 220
                                }, {
                                    favorpeople: "8",
                                    name: "Youtube_captionVideo.json",
                                    rank: 2,
                                    id: 67973,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "139",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 250.00000000000003,
                                    y: 220,
                                    x0: 250.00000000000003,
                                    y0: 220
                                }, {
                                    favorpeople: "8",
                                    name: "dailymotion_game.json",
                                    rank: 3,
                                    id: 58016,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "120",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 270,
                                    y: 220,
                                    x0: 270,
                                    y0: 220
                                }, {
                                    favorpeople: "8",
                                    name: "Youtube_Search.json",
                                    rank: 4,
                                    id: 73002,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "45",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 290.00000000000006,
                                    y: 220,
                                    x0: 290.00000000000006,
                                    y0: 220
                                }, {
                                    favorpeople: "8",
                                    name: "thesaurusAltervista_synonyms.json",
                                    rank: 5,
                                    id: 50579,
                                    pic: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    workspacepeople: "6",
                                    image: "https://s3.amazonaws.com/mashape-production-logos/apis/53aa5971e4b051a76d241234_medium",
                                    dataid: "199",
                                    visible: 0,
                                    parent: {},
                                    depth: 3,
                                    x: 310,
                                    y: 220,
                                    x0: 310,
                                    y0: 220
                                }]
                            }]
                        }],
                        depth: 0,
                        x: 180,
                        y: 0,
                        x0: 180,
                        y0: 0
                    };
                    console.log(root);
                    drawBall(svg, 2);
                });
            });
        }

        function newproject() {
            d3.select("svg").remove();
            /* countballs = 1;
             countLogo = 0;
             opendata();*/

        }

        var newGraph = 0;

        function newgraph() {
            var con = "<form action='JavaScript:sendData()' method='get'><input type='text' data-provide='typeahead' name='projectname'><input class='btn btn-primary' type='submit' value='OK'><input class='btn btn-primary' type='submit' onclick='javascript:clearAll();return false;' value='Cancel'></form>";
            newGraph = 1;
            $('#New').popover({
                title: 'Save as a project?:',
                trigger: 'click',
                html: true,
                content: con,
            });
        }

        function savedata() {
            //$('[data-toggle="popover"]').popover(); 
            var con = "<form action='http://140.121.197.135:7778/servrel/workspace/project?project=projectname%data=root' method='post'><input type='text' data-provide='typeahead' id='projectname'><input class='btn btn-primary' type='submit' value='OK'></form>";
            $('#Save').popover({
                title: 'Project Name:',
                trigger: 'click',
                html: true,
                content: con,
            });
            console.log(root);
            // alert(root);				
        }

        var graphSize = 1;

        function clearAll() {
            root = {
                "id": "",
                "name": "root",
                "visible": 0
            };
            console.log(root);
            d3.select("svg").remove();
            countballs = 1;
            countLogo = 0;
        }

        function openProject() {
            var list = "";
            var site = "http://140.121.197.135:7778/servrel/workspace?userID=" + localStorage.userID;
            $.getJSON(site, function(result) {
                console.log(result);
                $.each(result, function() {
                    if (this != 200) {
                        var ptname = this;
                        ptname = ptname.substr(1, ptname.length - 2);
                        console.log(ptname);
                        var name = ptname.split(/,/);
                        list += "<ul>";
                        for (key in name) {
                            name[key] = name[key].substr(1, name[key].length - 2);
                            console.log(name[key]);
                            if (name[key] != "") {
                                list += "<li id='" + name[key] + "'>" + name[key] + "</li>";
                            }
                        }
                        list += "</ul>";
                    }
                });
                //$("#classList").html(list);
                //opendata();
                console.log(list);
                $('#Open').popover({
                    title: 'Project:',
                    trigger: 'click',
                    html: true,
                    content: list,
                });
            });
            //var con = "<form action='JavaScript:sendData()' method='get'><input type='text' data-provide='typeahead' name='projectname'><input class='btn btn-primary' type='submit' value='OK'><input class='btn btn-primary' type='submit' onclick='javascript:clearAll();return false;' value='Cancel'></form>";
            newGraph = 1;
        }

        function savedata() {
            //$('[data-toggle="popover"]').popover(); 
            var con = "<form action='JavaScript:sendData()' method='get'><input type='text' data-provide='typeahead' name='projectname'><input class='btn btn-primary' type='submit' value='OK'></form>";
            $('#Save').popover({
                title: 'Project Name:',
                trigger: 'click',
                html: true,
                content: con,
            });
            console.log(root);
            // alert(root);				
        }

        function sendData() {
            var ptname = $('input[name="projectname"]').val();
            var wsite = "http://140.121.197.135:7778/servrel/workspace/project";
            var dataroot = root.toSource();
            //var dataroot=shallowStringify(root);

            /*$.post(wsite, 
			      {"projectname": ptname, "data": dataroot},  
				  function(data, status){alert("Data: " + data + "\nStatus: " + status);}				  
                  );*/

            console.log(dataroot);
            $.post(wsite, {
                "project": ptname,
                "data": dataroot,
                "userID": localStorage.userID
            }, function(result) {
                console.log("post: " + JSON.stringify(result));
                if (result.code == "200") {
                    alert("Success");
                } else {
                    console.log("逆失敗惹");
                }
            }, "json");
            if (newGraph == 1) {
                clearAll();
                newGraph = 0;
            }
            /* $.ajax({
                type: "POST",
                url: "http://140.121.197.135:7778/servrel/workspace/project",
                data: {
                    project: ptname,
                    data: dataroot,
					userID:localStorage.userID
                },
                contentType: "application/json",
                dataType: "json",
                　success: function(data) {
                    console.log("success");　　　　　
                    console.log(data);
                },
                　error: function() {
                    console.log("error");　
                    console.log(data);
                }
            });*/
        }

        function shallowStringify(obj, onlyProps, skipTypes) {
            var objType = typeof(obj);
            if (['function', 'undefined'].indexOf(objType) >= 0) {
                return objType;
            } else if (['string', 'number', 'boolean'].indexOf(objType) >= 0) {
                return obj; // will toString
            }
            // objType == 'object'
            var res = '{';
            for (p in obj) { // property in object
                if (typeof(onlyProps) !== 'undefined' && onlyProps) {
                    // Only show property names as values may show too much noise.
                    // After this you can trace more specific properties to debug
                    res += p + ', ';
                } else {
                    var valType = typeof(obj[p]);
                    if (typeof(skipTypes) == 'undefined') {
                        skipTypes = ['function'];
                    }
                    if (skipTypes.indexOf(valType) >= 0) {
                        res += p + ': ' + valType + ', ';
                    } else {
                        res += p + ': ' + obj[p] + ', ';
                    }
                }
            }
            res += '}';
            return res;
        }

        function saveas() {
            //$('[data-toggle="popover"]').popover(); 
            var con = "<form action='http://140.121.197.135:7778/servrel/workspace/project?project=projectname%data=root' method='post'><input type='text' data-provide='typeahead' id='projectname'><input class='btn btn-primary' type='submit' value='OK'></form>";
            $('#SaveAs').popover({
                title: 'Project Name:',
                trigger: 'click',
                html: true,
                content: con,
            });
            console.log(root);
            // alert(root);				
        }




        $(document).ready(function() {
            if (localStorage.userID == undefined) {
                window.location.assign("login.html");
            }
            workList();
            getDraw();
            $("#flotTag").hover(function() {
                $(this).animate({
                    margin: "-10px 0 0 -185px",
                    width: "185px",
                    height: "130px"
                }, "fast");
            }, function() {
                $(this).animate({
                    margin: "0 0 0 -35px",
                    width: "31px",
                    height: "26px"
                }, "fast");
            });

            $("#titleBar").click(function() {
                if (graphSize % 2 == 0) {
                    $("#saveButton").css({
                        width: "100%",
                        left: "0%"
                    });
                } else {
                    $("#saveButton").css({
                        width: "72%",
                        left: "28%"
                    });
                }
                $("#saveButton").slideToggle("normal");
            });

            $("#showGraph").bind("click", function(e) {
                e.stopPropagation();
                if (graphSize % 2 == 1) {
                    $("#titleBar").animate({
                        width: "100%",
                        left: "0%",
                    }, "normal");
                    $("#visualization2").animate({
                        width: "100%",
                        left: "0%"
                    }, "normal");
                    $("#saveButton").animate({
                        width: "100%",
                        left: "0%"
                    }, "normal");
                } else {
                    $("#titleBar").animate({
                        width: "72%",
                        left: "28%"
                    }, "normal");
                    $("#visualization2").animate({
                        width: "72%",
                        left: "28%"
                    }, "normal");
                    $("#saveButton").animate({
                        width: "72%",
                        left: "28%"
                    }, "normal");
                }
                graphSize++;
            });

        });
    </script>
</head>

<body>
    <div id="topBar">
        <a href="mixList.html" title="index"><img id="top_name" src="title.jpg" alt="picture" /></a>
    </div>
    <div id="titleBar"><img id="showGraph" src="showGraph.png"></img>Service Graph</div>
    <div id="saveButton">
        <button type="button" class="saveBtn" data-placement="bottom" data-toggle="popover" id="New" onclick='newgraph()'>New</button>
        <button type="button" class="saveBtn" data-placement="bottom" data-toggle="popover" id="Open" onclick='openProject()'>Open</button>
        <button type="button" class="saveBtn" data-placement="bottom" data-toggle="popover" id="Save" onclick='savedata()'>Save</button>
        <button type="button" class="saveBtn" data-placement="bottom" data-toggle="popover" id="SaveAs" onclick='saveas()'>Save As</button>
    </div>


    <div class="container">
        <h2>Workspace</h2>
        <ul class="list-group" id="classList">
        </ul>
    </div>

    <div id="visualization2" class="draw" ondragover="dragoverHandler(event)" ondrop="dropHandler(event)">
    </div>
    <div id="flotTag">
        <table id="pageLink">
            <tr>
                <td><img src="accountPic.png" /></td>
                <td><a id="accLink" href="login.html">Account</a></td>
            </tr>
            <tr>
                <td><img src="workPic.png" /></td>
                <td><a id="workLink" href="workspace.html">Workspace</a></td>
            </tr>
            <tr>
                <td><img src="favoritePic.png" /></td>
                <td><a id="favLink" href="favorite.html">Favorite API</a></td>
            </tr>
            <tr>
                <td><img src="myAPIPic.png" /></td>
                <td><a id="myLink" href="MyAPI.html">My API</a></td>
            </tr>
        </table>
    </div>
</body>

</html>